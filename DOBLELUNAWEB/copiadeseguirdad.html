<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doble Luna Records - Master Tape Machine</title>
    <style>
        /* --- ESTILO ESTUDIO FOTOGRÁFICO --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100%;
            overflow-x: hidden;
            overflow-y: auto;
            background: radial-gradient(circle at 50% 100%, #cfcfcf 0%, #7a7a7a 60%, #4a4a4a 100%);
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
        }

        /* --- ENCABEZADO CENTRALIZADO ESTILO AKAI/GX --- */
        header {
            width: 95%;
            max-width: 1200px;
            margin: 40px auto 30px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            color: #1a1a1a;
            z-index: 100;
        }

        .header-main-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin-bottom: 20px;
        }

        .logo-box {
            background-color: #C9242B; 
            color: white;
            padding: 15px 25px;
            font-family: "Arial Black", Gadget, sans-serif;
            font-size: 42px;
            font-weight: 900;
            letter-spacing: -2px;
            line-height: 0.85;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .model-info-block {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
        }

        .nav-container {
            display: flex;
            gap: 12px;
            margin-bottom: 10px;
        }

        .nav-btn {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 6px 14px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn:hover { background: #C9242B; }

        .model-text {
            font-family: "Arial Black", Gadget, sans-serif;
            font-size: 64px;
            font-weight: 900;
            margin: 0;
            line-height: 1;
            letter-spacing: -3px;
            text-transform: uppercase;
        }

        .model-subtitle {
            font-size: 18px;
            font-weight: normal;
            display: block;
            letter-spacing: 5px;
            margin-top: 5px;
            color: #333;
            text-transform: uppercase;
        }

        .description-para {
            max-width: 700px;
            font-size: 14px;
            line-height: 1.5;
            color: #222;
            margin-top: 10px;
            border-top: 1px solid rgba(0,0,0,0.2);
            padding-top: 15px;
            text-align: center;
        }

        /* --- SISTEMA DE GIRO 3D CORREGIDO --- */
        .contenedor {
            perspective: 2500px;
            width: 100%;
            display: flex;
            justify-content: center;
            padding-bottom: 100px;
        }

        .machine-card {
            width: 95%;
            max-width: 1120px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Aplicamos el giro a la carta */
        .machine-card.flipped {
            transform: rotateY(180deg);
        }

        .face {
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            filter: drop-shadow(0 80px 70px rgba(0,0,0,0.65));
        }

        .face-front {
            position: relative;
            z-index: 2;
            transform: rotateY(0deg);
        }

        .face-back {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            transform: rotateY(180deg); /* La cara trasera ya nace girada */
        }

        svg {
            width: 100%;
            height: auto;
            display: block;
        }

        /* --- DETALLES DE LA MÁQUINA --- */
        .reel-anim { transform-origin: center; transform-box: fill-box; }
        .playing .reel-anim { animation: girar var(--speed-duration, 4s) linear infinite; }
        @keyframes girar { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .needle-group { transform-origin: 150px 100px; transform: rotate(-30deg); will-change: transform; }
        #btn-play, #speed-btn { cursor: pointer; }
        .playing #btn-play-indicator { fill: #ff1100; filter: drop-shadow(0 0 10px #ff1100); }
        .brand-text { font-family: "Arial Black", Gadget, sans-serif; font-weight: 900; text-transform: uppercase; letter-spacing: -1px; pointer-events: none; }
        
        .service-item {
            font-family: "Arial Black", Gadget, sans-serif;
            font-size: 24px;
            fill: #eeeeee;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-main-row">
            <div class="logo-box">Doble Luna<br>Records</div>
            <div class="model-info-block">
                <nav class="nav-container">
                    <button class="nav-btn" id="btn-servicios">Servicios</button>
                    <button class="nav-btn">Estudio</button>
                    <button class="nav-btn">Contacto</button>
                </nav>
                <h1 class="model-text">DL-2026</h1>
                <span class="model-subtitle">Stereo Master Recorder</span>
            </div>
        </div>
        <p class="description-para">
            Ingeniería sonora de vanguardia con el carácter indiscutible de la cinta. El sistema DL-2026 ofrece una respuesta transitoria superior y la calidez armónica necesaria para que tus mezclas alcancen un estándar de masterización profesional.
        </p>
    </header>

    <div class="contenedor">
        <div class="machine-card" id="main-card">
            
            <div class="face face-front" id="machine-wrapper">
                <svg viewBox="0 0 768 1000" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
                    <rect x="30" y="40" width="708" height="920" fill="#8B5E34" />
                    <rect x="50" y="60" width="668" height="880" fill="#E2E0DC" />
                    <path d="M115 960 H155 Q155 980 135 980 H115 Q115 960 115 960Z" fill="#0D0D0D"/>
                    <path d="M615 960 H655 Q655 980 635 980 H615 Q615 960 615 960Z" fill="#0D0D0D"/>
                    <g transform="translate(0, -20)">
                        <g transform="translate(230, 280)"> 
                            <g class="reel-anim"><circle r="150" fill="#C8C8C8" /><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(0)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(90)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(180)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(270)"/><circle r="45" fill="#E2E0DC" /><circle r="12" fill="#050505" /><circle cx="18" cy="-18" r="6" fill="#050505" /><circle cx="-3" cy="-3" r="3" fill="#FFFFFF" /></g>
                        </g>
                        <g transform="translate(538, 280)">
                            <g class="reel-anim"><circle r="150" fill="#C8C8C8" /><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(0)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(90)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(180)"/><path d="M 0 -55 L 35 -135 L -35 -135 Z" fill="#050505" transform="rotate(270)"/><circle r="45" fill="#E2E0DC" /><circle r="12" fill="#050505" /><circle cx="18" cy="-18" r="6" fill="#050505" /><circle cx="-3" cy="-3" r="3" fill="#FFFFFF" /></g>
                        </g>
                    </g>
                    <rect x="50" y="445" width="668" height="160" fill="#7E8184" />
                    <path d="M170 420 L 240 480 L 530 480 L 600 450" stroke="#000000" stroke-width="3" fill="none"/>
                    <g transform="translate(250, 455)">
                        <rect x="0" y="0" width="220" height="120" fill="#2F2F2F" />
                        <rect x="5" y="5" width="210" height="105" fill="#171717" />
                        <text x="110" y="50" text-anchor="middle" fill="#d1d1d1" font-size="14" class="brand-text">Doble Luna</text>
                        <text x="110" y="75" text-anchor="middle" fill="#d1d1d1" font-size="14" class="brand-text">Records</text>
                        <path d="M5 110 L215 110 L210 115 L10 115 Z" fill="#A0A2A4" />
                    </g>
                    <circle cx="235" cy="485" r="18" fill="#C8C8C8" />
                    <circle cx="535" cy="520" r="28" fill="#FFFFFF" stroke="#171717" stroke-width="6"/>
                    <path d="M575 470 L630 470 L650 460" stroke="#171717" stroke-width="8" stroke-linecap="round" fill="none" />
                    <rect x="50" y="605" width="668" height="310" fill="#080808" />
                    <g>
                        <text x="110" y="625" text-anchor="middle" fill="#555" font-size="9" font-weight="bold" style="pointer-events:none; text-transform:uppercase;">tape speed</text>
                        <circle id="speed-btn" cx="110" cy="640" r="11" fill="#D9D9D9" />
                        <circle cx="150" cy="640" r="11" fill="#D9D9D9" /><circle cx="220" cy="640" r="11" fill="#D9D9D9" /><circle cx="320" cy="650" r="11" fill="#D9D9D9" /><circle cx="400" cy="650" r="11" fill="#D9D9D9" /><circle cx="480" cy="650" r="11" fill="#D9D9D9" />
                    </g>
                    <g transform="translate(545, 625)" id="btn-play">
                        <rect x="0" y="0" width="155" height="45" fill="#7E8184" rx="4" />
                        <rect x="10" y="8" width="28" height="28" fill="#C9242B" rx="2" id="btn-play-indicator" />
                        <rect x="45" y="8" width="28" height="28" fill="#171717" rx="2" stroke="#5E6164" stroke-width="1" />
                        <rect x="80" y="8" width="28" height="28" fill="#171717" rx="2" stroke="#5E6164" stroke-width="1" />
                        <rect x="115" y="8" width="28" height="28" fill="#171717" rx="2" stroke="#5E6164" stroke-width="1" />
                    </g>
                    <g transform="translate(70, 690)">
                        <g>
                            <rect width="300" height="100" fill="#3E3E3E" rx="4"/><rect x="10" y="10" width="280" height="80" fill="#171717" />
                            <path d="M40 70 Q 150 20 260 70" stroke="#7E8184" stroke-width="2" fill="none" />
                            <path d="M230 55 L235 48 M245 60 L250 53 M260 70 L265 63" stroke="#C9242B" stroke-width="3" fill="none" />
                            <g id="needle-left-group" class="needle-group"><line x1="150" y1="100" x2="150" y2="25" stroke="#FFFFFF" stroke-width="2.5" /></g>
                            <circle cx="150" cy="100" r="5" fill="#C9242B" />
                        </g>
                        <g transform="translate(328, 0)">
                            <rect width="300" height="100" fill="#3E3E3E" rx="4"/><rect x="10" y="10" width="280" height="80" fill="#171717" />
                            <path d="M40 70 Q 150 20 260 70" stroke="#7E8184" stroke-width="2" fill="none" />
                            <path d="M230 55 L235 48 M245 60 L250 53 M260 70 L265 63" stroke="#C9242B" stroke-width="3" fill="none" />
                            <g id="needle-right-group" class="needle-group"><line x1="150" y1="100" x2="150" y2="25" stroke="#FFFFFF" stroke-width="2.5" /></g>
                            <circle cx="150" cy="100" r="5" fill="#C9242B" />
                        </g>
                    </g>
                    <g fill="#D9D9D9"><circle cx="100" cy="850" r="12" /><circle cx="140" cy="850" r="12" /><circle cx="250" cy="850" r="25" /><circle cx="370" cy="850" r="25" /><circle cx="450" cy="835" r="8" /><circle cx="450" cy="865" r="8" /><circle cx="530" cy="850" r="25" /><circle cx="620" cy="850" r="18" /><circle cx="690" cy="850" r="12" /></g>
                </svg>
            </div>

            <div class="face face-back">
                <svg viewBox="0 0 768 1000" xmlns="http://www.w3.org/2000/svg">
                    <rect x="30" y="40" width="708" height="920" fill="#8B5E34" />
                    
                    <rect x="55" y="65" width="658" height="870" fill="#1a1a1a" rx="4" />
                    
                    <circle cx="80" cy="90" r="6" fill="#333" stroke="#444" stroke-width="1" />
                    <circle cx="688" cy="90" r="6" fill="#333" stroke="#444" stroke-width="1" />
                    <circle cx="80" cy="910" r="6" fill="#333" stroke="#444" stroke-width="1" />
                    <circle cx="688" cy="910" r="6" fill="#333" stroke="#444" stroke-width="1" />
                    <circle cx="384" cy="90" r="6" fill="#333" stroke="#444" stroke-width="1" />
                    <circle cx="384" cy="910" r="6" fill="#333" stroke="#444" stroke-width="1" />

                    <g transform="translate(100, 140)">
                        <rect width="568" height="5" fill="#0a0a0a" />
                        <rect y="20" width="568" height="5" fill="#0a0a0a" />
                        <rect y="40" width="568" height="5" fill="#0a0a0a" />
                    </g>

                    <rect x="180" y="230" width="408" height="90" fill="#000" stroke="#C9242B" stroke-width="2" />
                    <text x="384" y="285" text-anchor="middle" fill="#C9242B" font-family="Arial Black" font-size="34">MASTERING SERVICES</text>

                    <g transform="translate(130, 420)">
                        <text x="0" y="0" class="service-item">01. ANALOG MASTERING</text>
                        <text x="0" y="90" class="service-item">02. TAPE RE-AMPING</text>
                        <text x="0" y="180" class="service-item">03. VALVE SUMMING</text>
                        <text x="0" y="270" class="service-item">04. AUDIO RESTORATION</text>
                        <text x="0" y="360" class="service-item">05. STEMS MIXING</text>
                    </g>

                    <g transform="translate(130, 800)">
                        <circle cx="40" cy="40" r="30" fill="#000" stroke="#333" stroke-width="3" />
                        <text x="40" y="90" text-anchor="middle" fill="#555" font-size="12">INPUT L</text>
                        <circle cx="140" cy="40" r="30" fill="#000" stroke="#333" stroke-width="3" />
                        <text x="140" y="90" text-anchor="middle" fill="#555" font-size="12">INPUT R</text>
                        
                        <rect x="350" y="10" width="130" height="60" fill="#000" stroke="#333" stroke-width="2" />
                        <text x="415" y="45" text-anchor="middle" fill="#444" font-size="11">AC POWER</text>
                    </g>
                    
                    <text x="384" y="910" text-anchor="middle" fill="#333" font-size="13" font-family="Arial Black">DESIGNED BY DOBLE LUNA RECORDS • 2026</text>
                </svg>
            </div>

        </div>
    </div>

    <script>
        const btnServicios = document.getElementById('btn-servicios');
        const mainCard = document.getElementById('main-card');
        const btnPlay = document.getElementById('btn-play');
        const speedBtn = document.getElementById('speed-btn');
        const wrapper = document.getElementById('machine-wrapper');
        const nL = document.getElementById('needle-left-group');
        const nR = document.getElementById('needle-right-group');
        
        let isPlaying = false;
        let currentSpeed = 7.5; 
        let audioCtx, source, analyser, dataArray, audioBuffer = null;
        let lastL = -30, lastR = -30;

        // Giro de la máquina
        btnServicios.addEventListener('click', () => {
            mainCard.classList.toggle('flipped');
        });

        // Lógica de Audio (idéntica a la anterior)
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioCtx.createAnalyser();
                analyser.fftSize = 256;
                analyser.smoothingTimeConstant = 0.5;
                dataArray = new Uint8Array(analyser.frequencyBinCount);
            }
        }

        async function loadDefault() {
            try {
                const response = await fetch("Máster Amarillo 10.11.aif");
                if (response.ok) {
                    const ab = await response.arrayBuffer();
                    initAudio();
                    audioBuffer = await audioCtx.decodeAudioData(ab);
                }
            } catch (e) { console.warn("Audio file issue"); }
        }

        window.onload = loadDefault;

        function start() {
            initAudio();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            wrapper.classList.add('playing');
            isPlaying = true;
            if (audioBuffer) {
                source = audioCtx.createBufferSource();
                source.buffer = audioBuffer;
                source.playbackRate.value = (currentSpeed === 7.5) ? 1.0 : 0.5;
                source.connect(analyser);
                analyser.connect(audioCtx.destination);
                source.start(0);
                source.onended = () => { if(isPlaying) stop(); };
                requestAnimationFrame(loopVU);
            } else { requestAnimationFrame(loopSimulado); }
        }

        function stop() {
            if (source) { try { source.stop(); } catch(e){} source = null; }
            isPlaying = false;
            wrapper.classList.remove('playing');
            nL.style.transform = `rotate(-30deg)`;
            nR.style.transform = `rotate(-30deg)`;
        }

        function loopVU() {
            if (!isPlaying || !audioBuffer) return;
            analyser.getByteFrequencyData(dataArray);
            let l = 0, r = 0;
            for(let i=0; i<10; i++) l += dataArray[i];
            for(let i=10; i<20; i++) r += dataArray[i];
            const targetL = -30 + (l/10/255 * 70);
            const targetR = -30 + (r/10/255 * 70);
            lastL += (targetL - lastL) * 0.2;
            lastR += (targetR - lastR) * 0.2;
            nL.style.transform = `rotate(${lastL}deg)`;
            nR.style.transform = `rotate(${lastR}deg)`;
            requestAnimationFrame(loopVU);
        }

        function loopSimulado() {
            if (!isPlaying || audioBuffer) return;
            const tL = -20 + Math.random() * 30;
            const tR = -20 + Math.random() * 30;
            lastL += (tL - lastL) * 0.1;
            lastR += (tR - lastR) * 0.1;
            nL.style.transform = `rotate(${lastL}deg)`;
            nR.style.transform = `rotate(${lastR}deg)`;
            requestAnimationFrame(loopSimulado);
        }

        btnPlay.addEventListener('click', () => { if (!isPlaying) start(); else stop(); });
        speedBtn.addEventListener('click', () => {
            currentSpeed = (currentSpeed === 7.5) ? 3.75 : 7.5;
            document.documentElement.style.setProperty('--speed-duration', (currentSpeed === 7.5) ? '4s' : '8s');
            if (source) source.playbackRate.value = (currentSpeed === 7.5) ? 1.0 : 0.5;
        });

        document.body.addEventListener('dragover', e => e.preventDefault());
        document.body.addEventListener('drop', async e => {
            e.preventDefault();
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('audio')) {
                initAudio();
                const ab = await file.arrayBuffer();
                audioBuffer = await audioCtx.decodeAudioData(ab);
                if (isPlaying) { stop(); start(); }
            }
        });
    </script>
</body>
</html>